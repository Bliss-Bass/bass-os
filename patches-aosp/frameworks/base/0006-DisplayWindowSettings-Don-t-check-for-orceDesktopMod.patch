From 2fafbdc74a72241dde27d24f75915ed5588b40e5 Mon Sep 17 00:00:00 2001
From: Erfan Abdi <erfangplus@gmail.com>
Date: Thu, 5 Jan 2023 02:49:41 +0330
Subject: [PATCH 06/16] =?UTF-8?q?DisplayWindowSettings:=20Don=E2=80=99t=20?=
 =?UTF-8?q?check=20for=20orceDesktopMode=20for=20freeform?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I2f3e8739efcf77ba560c65dcbc7e3f3bdd57ef04
---
 .../core/java/com/android/server/wm/DisplayWindowSettings.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/services/core/java/com/android/server/wm/DisplayWindowSettings.java b/services/core/java/com/android/server/wm/DisplayWindowSettings.java
index 6d5abe1e2f31..e530ad34a27b 100644
--- a/services/core/java/com/android/server/wm/DisplayWindowSettings.java
+++ b/services/core/java/com/android/server/wm/DisplayWindowSettings.java
@@ -132,7 +132,7 @@ class DisplayWindowSettings {
         // No record is present so use default windowing mode policy.
         if (windowingMode == WindowConfiguration.WINDOWING_MODE_UNDEFINED) {
             windowingMode = mService.mAtmService.mSupportsFreeformWindowManagement
-                    && (mService.mIsPc || dc.forceDesktopMode())
+                    && (mService.mIsPc || dc.getDisplayId() != Display.DEFAULT_DISPLAY)
                     ? WindowConfiguration.WINDOWING_MODE_FREEFORM
                     : WindowConfiguration.WINDOWING_MODE_FULLSCREEN;
         }
-- 
2.34.1

