From 93bcfb9caaecf0937a0599e6aa596376c0871e40 Mon Sep 17 00:00:00 2001
From: electrikjesus <electrikjesus@gmail.com>
Date: Tue, 19 Mar 2024 21:20:07 -0400
Subject: [PATCH 15/25] DisplayLayout: Allow overriding navbar height through
 properties

Use ro.boot.force.navbar_height_override=(integer)
---
 .../src/com/android/wm/shell/common/DisplayLayout.java    | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/libs/WindowManager/Shell/src/com/android/wm/shell/common/DisplayLayout.java b/libs/WindowManager/Shell/src/com/android/wm/shell/common/DisplayLayout.java
index d10063a3003b..224956ef30ad 100644
--- a/libs/WindowManager/Shell/src/com/android/wm/shell/common/DisplayLayout.java
+++ b/libs/WindowManager/Shell/src/com/android/wm/shell/common/DisplayLayout.java
@@ -222,7 +222,13 @@ public class DisplayLayout {
         if (mHasStatusBar) {
             convertNonDecorInsetsToStableInsets(res, mStableInsets, mCutout, mHasStatusBar);
         }
-        mNavBarFrameHeight = getNavigationBarFrameHeight(res, mWidth > mHeight);
+        // Allow a system property to override anvbar height.
+        final String navbarHeightOverride = SystemProperties.get("ro.boot.force.navbar_height_override");
+        if (!navbarHeightOverride.isEmpty()) {
+            mNavBarFrameHeight = Integer.parseInt(navbarHeightOverride);
+        } else {
+            mNavBarFrameHeight = getNavigationBarFrameHeight(res, mWidth > mHeight);
+        }
     }
 
     /**
-- 
2.34.1

